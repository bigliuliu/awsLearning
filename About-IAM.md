# AWS职能

* Infrastructure （global network security）
* configuration and vulnerability analysis [配置和漏洞分析]
* compliance validation [合规性验证]
# 概念

## AWS global service

* IAM ： identity and access management
* Route 53 : DNS service
* CloudFront :  content delivery network
* WAF : web application firewall
## most AWS services are Region-scoped

* Amazon EC2 ：Infrastructure as a Service [基础即服务]
* Elastic [弹性] Beanstalk : Platform as a Service 
* Lambda : Function as a Service
* Rekognition [重新认知]: Software as a Service
# IAM

## plicies structure

### consists of

* Version : 策略语言的版本
* Id: 策略id （optional 可选）
* Statement： one or more individual[个体]  statements [声明]  （required 必须）
### Statements consists of

* Sid : statement 的 id【optional】
* Effect ： whether the statement allows or denies [拒绝] access (当前声明允许或者禁止)
* Principal 【首长】： account / user /role to which this policy applied to [这条策略应用的账户、角色或用户]
* Action： list of actions this policy allows or denies
* Resource : list of resources to which the actions applied to
* Condition: condition [条件] for when this policy is in effect
## MFA

### 概念

* multi factor authentication  : 多因素身份验证
* **MFA = password you know + security device you own**
### MFA devices options in AWS

#### virtual MFA device

>Support for multiple tokens on a single device [支持单个设备上的多个tokens ]
* Google Authenticator [phone only]
* Authy [multi-device]
#### universal 2nd Factor（U2F）Security Key

>Support for multiple root and IAM users using a single security key [使用单个安全密钥支持多个根用户和 IAM 用户]
* YubiKey by Yubico
#### Hardware Key Fob MFA  Device

* provided by Gemalto
## how can users access AWS?

>access key are generated by through the AWS Console
* AWS management Console (password + MFA)
* AWS Command Line Interface (CLI--命令行页面) : protected by access keys
* AWS Software Developer Kit (SDK) --for code : protected by access keys 
**查看所有iam用户信息命令**

```c++
aws iam list-uers
```
返回结果：
```json
{
    "Users": [
        {
            "Path": "/",
            "UserName": "tiana",
            "UserId": "AIDATCKAPQBRHXYA5YIAN",
            "Arn": "arn:aws:iam::211125502050:user/tiana",
            "CreateDate": "2024-04-08T06:51:36+00:00",
            "PasswordLastUsed": "2024-04-08T06:54:15+00:00"
        }
    ]
}
```
## IAM Roles for Services

* some AWS services will need to perform actions on your behalf [某些 AWS 服务需要代表您执行操作]
* to do so ,we will assign permissions to AWS services with IAM Roles
>Common roles:
>1. EC2 Instance Roles  [ec2 实例角色]
>2. Lamda Function Roles 
>3. Roles for CloudFormation
## IAM Security Tools

* IAM Credential [凭证] Report (account-level) :  a report that lists all your account's users and the status of their various credentials [列出您帐户的所有用户及其各种凭据状态的报告]
* IAM Access Advisor [建议] (user-level) : Access advisor shows the service permissions granted to a user and when those services were last accessed [访问顾问显示授予用户的服务权限以及上次访问这些服务的时间];   you can use this information to revise[修正] your policies.
## Summary [总结]

* Users ： mapped to a physical user, has a password for AWS Console
* Groups : contains users only
* Polices : JSON document that outlines permissions for users or groups
* Roles : for EC2 intances or AWS services
* Security : MFA+Password Policy
* AWS CLI : manage your AWS services using the command-line
* AWS SDK : manage your AWS services using a programming language
* Access Keys : access AWS using the CLI or SDK
* Audit : IAM Credential Reports &  IAM Access Advisor
